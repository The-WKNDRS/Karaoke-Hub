<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create Venue</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
    <link rel="stylesheet" th:href="@{/css/navbar.css}">
    <link rel="stylesheet" th:href="@{/css/resets.css}">
    <link rel="stylesheet" th:href="@{/css/layout.css}">
    <link rel="stylesheet" th:href="@{/css/footer.css}">
    <link rel="stylesheet" th:href="@{/css/create-venue.css}">
</head>
<body>
<div class="page-wrapper">
    <div th:insert="fragments/navbar.html :: navbar"></div>
    <div class="container grow">
        <div class="row grow justify-space-between">
            <div class="column align-center">
                <div class="create-box">
                    <div class="logo">
                        <img class="logo-img" th:src="@{/img/karaoke-icon.png}" alt="microphone">
                        <h3>Karaoke Hub</h3>
                    </div>
                    <h1>Create Venue</h1>
                </div>
                <form class="register-form" th:action="@{/create-venue}" th:object="${venue}" th:method="post">
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input id="name" name="name" th:field="*{name}">
                    </div>
                    <div class="form-group">
                        <label for="address">Address</label>
                        <input id="address" name="address" th:field="*{address}">
                    </div>
                    <div class="form-group">
                        <label for="city">City</label>
                        <input id="city" name="city" th:field="*{city}">
                    </div>
                    <div class="form-group">
                        <label for="state">State</label>
                        <input id="state" name="state" th:field="*{state}">
                    </div>
                    <div class="form-group">
                        <label for="zip_code">Zip Code</label>
                        <input id="zip_code" name="zip_code" th:field="*{zip_code}">
                    </div>
                    <div class="form-group">
                        <label for="website">Website (Optional)</label>
                        <input id="website" name="website" th:field="*{website}">
                    </div>
                    <input type="hidden" id="yelp_id" name="yelp_id" th:field="*{yelp_id}">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                    <input type="submit" value="Create">
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    const nameInput = document.getElementById('name');
    const cityInput = document.getElementById('city');
    const yelpIdInput = document.getElementById('yelp_id');

    nameInput.addEventListener('input', generateYelpId);
    cityInput.addEventListener('input', generateYelpId);

    function generateYelpId() {
        const name = nameInput.value.toLowerCase().replace(/\s+/g, '-').replace(/'s/g, '');
        const city = cityInput.value.toLowerCase().replace(/\s+/g, '-');
        yelpIdInput.value = `${name}-${city}`;
    }
</script>
</body>
</html>
